---
title: "Data Tidying"
author: "Albina Music"
date: "2023-02-18"
categories: [qmd notes]
---
## look at the untidy data

```{r}
untidy_data <- read_csv("data/untidy_data.csv", show_col_types = FALSE)
```

## look at the tidy data

```{r}
tidy_data <- read_csv("data/tidy_data.csv", show_col_types = FALSE)
```

```{r}
tidy_data %>%
  group_by(customer_id) %>%
  summarise(
    total_items = sum(items),
    total_price = sum(totalprice)
  )
```

## one observation per row

```{r}
longer_data <- pivot_longer(
  data = untidy_data, 
  cols = itemsprice_2018:totalprice_2020, 
  names_to = c("category", "year"), 
  names_sep = "_", 
  values_to = "value", 
  
  names_transform = list(year = as.integer),
  values_transform = list(value = as.character) 
)
```

## one variable per column

```{r}
wider_data <- pivot_wider(
  data = longer_data,
  id_cols = c(customer_id, year),
  names_from = category,
  values_from = value
)
```
